@import './quill.snow.css';
@import './elm-datepicker.css';

@tailwind base;

@tailwind components;

:root {
  --white: #f6f6f6;
  --black: #4a4a4a;
  --gray: #eee;
  --font-family: 'Nunito Sans', 'Lato', 'San Francisco', 'Helvetica', 'Verdana', sans-serif;
}

/* Typography */

body {
  background-color: #f6f6f6;
  font-family: var(--font-family);
  color: var(--black);
}

body > * {
  @apply text-base;
}

/* End of Typography */

/* Button */

@layer components {
  .button {
    @apply uppercase text-base font-bold leading-5 flex items-center justify-center text-center w-40 h-10 px-2;
  }

  .button:disabled {
    @apply bg-opacity-75 button-disabled;
  }

  .button-primary {
    @apply bg-orange-300 text-white rounded-super hover:bg-orange-100 focus-visible:bg-orange-100 focus-visible:outline-none;
  }

  .button-secondary {
    @apply bg-white text-orange-300 rounded-full border hover:border-orange-300 focus-visible:border-orange-300 focus-visible:outline-none;
  }

  .button-sm {
    @apply py-1 px-4 h-8;
  }

  .button-lg {
    @apply py-3 px-6 h-12;
  }

  .button-success {
    @apply bg-green text-white rounded-full;
  }

  .button-disabled {
    @apply bg-gray-500 text-gray-900 rounded-super pointer-events-none;
  }

  .button-danger {
    @apply button-secondary text-red focus-visible:ring-red focus-visible:ring-opacity-20 hover:border-red;
  }
}

/* End of Button */

/* Form */

@layer components {
  /* TODO - Clean up form-related CSS (move to Elm with Tailwind) */
  .form-input {
    @apply bg-white px-3 py-2 placeholder-gray-900 input-border text-base;
  }

  .input-border {
    @apply border border-gray-500 rounded-md ring-0 duration-100 focus-within:ring focus:ring;

    transition-property: box-shadow, color, border-color;
  }

  .input-border:not(.with-error) {
    @apply focus-within:ring-green focus-within:border-green focus-within:ring-opacity-50;
  }

  .input-border.with-error {
    @apply focus-within:ring-red focus-within:ring-opacity-30;
  }

  .form-checkbox {
    @apply h-5 w-5 text-green rounded-sm input-border disabled:bg-gray-100;
  }

  .form-checkbox:checked {
    @apply text-4xl;

    background-image: url('/icons/checkbox.svg');
  }

  .form-select {
    @apply input pr-10 bg-no-repeat focus:outline-none;

    background-position: right 0.5rem center;
    background-size: 2rem;
    background-image: url('/icons/select-arrow.svg');
  }

  .form-select-icon {
    @apply bg-no-repeat;

    background-position: right 0.5rem center;
    background-size: 2rem;
    background-image: url('/icons/select-arrow.svg');
  }

  .form-radio {
    @apply h-5 w-5 bg-none rounded-full border text-green input-border checked:bg-none disabled:text-gray-900 disabled:border-gray-900;

    /* --default-tailwind-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); */

    /* --shadow-size: 1.25rem;

    box-shadow: var(--default-tailwind-shadow), inset 0 0 0 var(--shadow-size) white !important; */
  }

  /* .form-radio:not(.with-error):checked {
    --shadow-size: 0.25rem;
  } */

  /* End of form */

  /* Input */

  .input {
    @apply form-input h-12 outline-none text-black;
  }

  .input:disabled {
    @apply bg-gray-500;
  }

  textarea.input {
    @apply h-40;
  }

  .with-error {
    @apply border-red text-red focus:border-red;
  }

  .field-with-error,
  .field-with-error:focus {
    @apply border-red text-red;
  }

  .label {
    @apply text-black font-bold uppercase text-sm mb-2 block;
  }
}

/* End of form */

/* Elm Select */

.elm-select-menu .elm-select-item:last-of-type .items-center > .border-dotted {
  border-style: unset;
}

/* End of Elm Select */

/* Tooltip */

.tooltip-container p {
  visibility: hidden;
}

.tooltip-container:hover p {
  visibility: visible;
}

.tooltip-container p::after {
  content: ' ';
  position: absolute;
  bottom: 100%;
  right: 5%;
  margin-left: -5px;
  border-width: 10px;
  border-style: solid;
  border-color: transparent transparent black transparent;
}

/* End of Tooltip */

/* Icon Tooltip */
.icon-tooltip {
  @apply relative flex;
}

.icon-tooltip .icon-tooltip-content {
  @apply invisible absolute top-full bg-black rounded-sm p-2 text-sm text-white;

  width: 18em;
  line-height: 1.4;
  left: -3em;
  margin-top: 10px;
}

.icon-tooltip:hover .icon-tooltip-content {
  @apply visible;
}

.icon-tooltip::after {
  visibility: hidden;
  position: absolute;
  content: ' ';
  left: 50%;
  margin-left: -10px;
  top: 7px;
  border-width: 10px;
  border-style: solid;
  border-color: transparent transparent black transparent;
}

.icon-tooltip:hover::after {
  @apply visible;
}

/* End of Icon Tooltip */

/* Modal */

.modal {
  @apply z-50 fixed inset-0;

  transition: opacity 0.25s ease;
}

.modal-bg {
  @apply bg-black inset-0 fixed opacity-50;
}

.modal-content {
  @apply bg-white rounded-t-lg absolute left-0 bottom-0 w-full;
}

.modal-content-full {
  @apply rounded-t-none top-0 overflow-auto;
}

.modal-header {
  @apply w-full font-semibold text-lg p-4 pb-2 flex justify-center;
}

.modal-body {
  @apply p-4 pt-0 overflow-y-auto h-full;

  min-height: 4rem;
  max-height: 60vh;
}

.modal-body-lg {
  @apply p-4 pt-0 overflow-y-auto;

  min-height: 4rem;
  max-height: 80vh;
}

.modal-body-full {
  max-height: unset;
}

.modal-footer {
  @apply flex flex-wrap justify-center items-center p-4 pt-0;
}

.modal-cancel {
  @apply button button-secondary w-full mb-4;
}

.modal-accept {
  @apply button button-primary w-full;
}

@screen md {
  .modal-content {
    @apply max-w-3xl top-modal z-10 bottom-auto left-1/2 transform mx-auto rounded-lg;

    /* Using -translate-y-1/2 and -translate-x-1/2 doesn't work because they
    overwrite each other, so we just set the variables tailwind uses */
    --tw-translate-x: -50%;
  }

  .modal-content-lg,
  .modal-content-full {
    @apply top-1/2;

    --tw-translate-y: -50%;
  }

  .modal-body-lg {
    @apply px-4 py-0 overflow-y-auto;

    min-height: 4rem;
    max-height: 60vh;
  }

  .modal-body-full {
    max-height: 80vh;
  }

  .modal-footer {
    @apply bg-gray-100 rounded-b-lg p-4;
  }

  .modal-cancel {
    @apply mb-0 w-48 mr-8;
  }

  .modal-accept {
    @apply w-48;
  }
}

/* End of Modal */

/* Tag */

.tag {
  @apply uppercase rounded text-sm py-1 px-5;
}

/* End of Tag */

/* CHECKBOX TOGGLE SWITCH */
.form-switch {
  @apply relative select-none w-10 mr-2;
}

.form-switch-checkbox {
  @apply hidden;
}

.form-switch-label {
  @apply block overflow-hidden cursor-pointer bg-white border-2 border-gray-100 rounded-full h-6;

  transition: background-color 0.2s ease-in;
  min-width: 43px;
}

.form-switch-label::before {
  @apply absolute block bg-gray-900 inset-y-0 w-4 h-4 rounded-full -ml-1 mt-1;

  right: 50%;
  content: '';
  transition: all 0.2s ease-in;
}

.form-switch-checkbox:checked + .form-switch-label {
  @apply bg-indigo-500 shadow-none;
}

.form-switch-checkbox:checked + .form-switch-label::before {
  @apply right-0 bg-white;

  margin-right: 0.05rem;
}

[type='checkbox']:focus-visible + .form-switch-label2 {
  @apply focus:outline-none ring ring-green ring-opacity-50 active:ring-0;
}

[type='checkbox']:focus-visible + .form-switch-label2.with-error {
  @apply ring-red ring-opacity-30;
}

.form-switch-label2::before {
  @apply block bg-gray-900 w-4 h-4 rounded-full absolute inset-y-0.5 mx-0.5 transition-all duration-200 ease-in right-6;

  content: '';
}

.form-switch-label2.checked::before {
  @apply bg-white right-0;
}

@layer utilities {
  .form-error {
    /* validation message for the field */
    @apply text-red text-sm uppercase tracking-wide block mt-2 animate-fade-in-from-above;
  }
}

.shake-invalid {
  animation: shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  perspective: 1000px;
}

@keyframes shake {
  10%,
  90% {
    transform: translate3d(-1px, 0, 0);
  }

  20%,
  80% {
    transform: translate3d(2px, 0, 0);
  }

  30%,
  50%,
  70% {
    transform: translate3d(-4px, 0, 0);
  }

  40%,
  60% {
    transform: translate3d(4px, 0, 0);
  }
}

.form-error-on-dark-bg {
  @apply form-error text-lightred;
}

.lang-menu-open .lang-flag {
  @apply mr-2;
}

.min-h-stretch {
  /* Fill all available vertical space. It works predictable for mobile,
  because it doesn't take the address bar into account. */
  @apply min-h-screen;

  min-height: stretch;
}

/* Objectives */
.action-verifier svg {
  fill: #eee;
}

/* End of Objectives */

.spinner-light {
  border-color: white;
  border-right-color: transparent;
}

/* Claims */
.claim-photo-thumb {
  @apply cursor-pointer w-24 h-16 flex items-center justify-center rounded-sm;
}

.claim-photo-thumb:hover {
  @apply ring;
}

/* End of Claims */

/* Extra utilities */

/* For more information on adding new utilities, see
https://tailwindcss.com/docs/adding-new-utilities */

@layer utilities {
  .flex-basis-0 {
    flex-basis: 0;
  }

  .truncate-children > :first-child {
    @apply truncate;
  }

  .truncate-children > :not(:first-child) {
    @apply hidden;
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring ring-green ring-opacity-50 active:ring-0;
  }

  .animation-delay-150 {
    animation-delay: 150ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .shadow-form-control {
    --shadow-size: 1.25rem;
  }

  .shadow-form-control:checked {
    --shadow-size: 0.25rem;
  }
}

/* End of extra utilities */

/* Markdown Viewer classes */

.markdown-viewer ul {
  @apply list-disc list-inside;
}

.markdown-viewer ol {
  @apply list-decimal list-inside;
}

.markdown-viewer a {
  @apply underline hover:opacity-80;
}

.markdown-viewer h1 {
  @apply text-4xl;
}

.markdown-viewer h2 {
  @apply text-2xl;
}

/* End of Markdown Viewer classes

/* QuillJS classes */

.ql-toolbar.ql-snow {
  @apply bg-white border-0 border-b border-gray-500 rounded-t-md px-3 py-2;
}

.ql-container.ql-snow {
  @apply border-none;
}

.ql-editor {
  @apply bg-white text-black text-base rounded-b-md px-3 py-2 min-h-36 max-h-48 focus:outline-none;

  font-family: var(--font-family);
}

.ql-container.ql-snow.ql-disabled .ql-editor {
  @apply bg-gray-500;
}

.ql-snow .ql-editor a {
  @apply text-orange-500 no-underline hover:underline;
}

.ql-editor.ql-blank::before {
  @apply text-gray-400;
}

.ql-stroke {
  @apply text-gray-600;

  stroke: currentColor !important;
}

.ql-snow .ql-fill {
  @apply text-gray-600;

  fill: currentColor !important;
}

.ql-snow.ql-toolbar button:hover .ql-stroke,
.ql-snow.ql-toolbar button:hover .ql-fill,
.ql-snow.ql-toolbar button:focus .ql-stroke,
.ql-snow.ql-toolbar button:focus .ql-fill,
.ql-snow.ql-toolbar button.ql-active .ql-stroke,
.ql-snow.ql-toolbar button.ql-active .ql-fill {
  @apply text-indigo-500;
}

.ql-snow .ql-tooltip {
  @apply rounded-md border border-gray-200 shadow-lg z-10 py-2 px-4;

  font-family: var(--font-family);
}

.ql-snow .ql-tooltip[data-mode='link']::before {
  content: '';
}

.ql-snow .ql-tooltip::before {
  content: '';
}

.ql-snow .ql-tooltip:not(.ql-hidden) {
  @apply grid gap-2 md:grid-cols-2;
}

.ql-snow .ql-tooltip a.ql-preview {
  @apply max-w-full text-center w-full text-orange-500 no-underline hover:underline md:col-span-2;
}

.ql-snow .ql-tooltip a.ql-action {
  @apply button button-primary;
}

.ql-snow .ql-tooltip a.ql-action::after {
  @apply border-0 mr-0;

  content: attr(data-edit-text);
}

.ql-snow .ql-tooltip a.ql-remove {
  @apply button button-secondary;
}

.ql-snow .ql-tooltip a.ql-remove::before {
  content: attr(data-remove-text);
}

/* End of QuillJS classes */

/* Legacy CSS leftover */

.hidden-img-input,
.profile-img-input {
  width: 0.1px;
  height: 0.1px;
  opacity: 0;
  overflow: hidden;
  position: absolute;
  z-index: -1;
}

/* End of Legacy CSS leftover */

/* https://tailwindcss.com/docs/extracting-components#extracting-css-components-with-apply */
@tailwind utilities;
